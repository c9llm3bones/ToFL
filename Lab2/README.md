# Lab2: BrainFUCK-REFAL

Реализует автоматический генератор DFA. Программа строит регулярные выражения и DFA для каждой лексемы, а также предоставляет два способа построения грамматики: конкатенацией регулярок и DFA.

Два варианта работы:
- Генерация регулярных выражений для каждой из лексем 
- Генерация DFA
---

## Содержание

- [Описание задачи](#описание-задачи)
- [Алфавит языка](#алфавит-языка)
- [Описание грамматики](#описание-грамматики)
- [Модули проекта](#модули-проекта)
- [Ограничения Brainfuck Рефал](#Ограничения-Brainfuck-Рефал)
---

## Описание задачи

Цель лабораторной работы — построить автомат, распознающий лексически правильные конструкции обфусцированного Рефала на основе грамматики. Проект предоставляет:
1. Генерацию регулярных выражений для каждой лексемы.
2. Построение DFA на основе регулярных выражений.
3. Сравнение эквивалентности автоматов для проверки корректности.
4. Построение грамматики двумя способами:
   - Конкатенацией регулярных выражений.
   - Из DFA.

---

## Алфавит языка

- Основной алфавит: `{a, b, c, 0, 1, 2}`.
- Уникальные алфавиты для различных лексем:
    Для каждой лексемы не может быть > 2 символов, при этом 2 символа м.б. в алфавите только 1-ой лексемы(в начале работы программы выбирается рандомно среди первых четырех лексем, кому достанется 2 символа)
  - **[eol]**: уникальный символ конца строки(с наибольшей вероятностью имеет 2 символа в алфавите).
  - **[blank]**: символы пробелов.
  - **[equal]** и **[sep]**: имеют уникальные первые и последние символы.
  - **Скобки (левые и правые)**: попарно уникальные языки для каждой из лексем, уникальность достигается различной длиной, притом нечетной.
  - **[var]** - только строки четной длины, бесконечный; **[const]** -  только строки нечетной длины, бесконечный.

---

## Описание грамматики

Грамматика обфусцированного Рефала описывается следующим образом:

[program] ::= [eol]*([definition][eol]+)+

[definition] ::= [const] [lbr-1] ([eol]*[sentence])* [eol]*[rbr-1]

[sentence] ::= [pattern][equal][expression][sep]

[pattern] ::= [lbr-3][pattern][rbr-3]|[pattern][blank][pattern] | [var] | [const] |

[expression] ::= [var] | [const] | [expression][blank][expression]
[lbr-3] [expression] [rbr-3] |
[lbr-2] [const] [blank] [expression] [rbr-2]
Если для лексемы нет определения в грамматике, значит, она
определяется языком некоторого автомата. Алфавит BF-Рефала:
{a, b, c, 0, 1, 2}.

---
# Ограничения Brainfuck Рефал
- автоматы для [eol] и [blank] имеют алфавит, отличный от всех
остальных лексем (и друг от друга);
- первые и последние буквы слов, соответствующих автоматам для
[equal] и [sep], находятся в другом алфавите, чем все прочие
автоматы, и языки у этих лексем конечные (но не обязательно
синглетоны);
- автоматы для разных типов скобок, левых и правых, все имеют
попарно непересекающиеся языки, не пересекающиеся с языками
переменных и констант, кроме того, конкатенация любых двух
таких автоматов друг с другом будет иметь язык, не
пересекающийся ни с каким языком автомата для одной скобки
(языки, содержащие единственные различные непустые строки,
являются тривиальным случаем, подходящим под это условие, но
есть и другие случаи);
- языки переменных и констант не пересекаются друг с другом, оба
бесконечные.

---

## Модули проекта

### **`main.py`**
- Основной файл, связывающий все компоненты проекта.
- Выполняет построение регулярных выражений, генерацию DFA и взаимодействие с learner'om.

### **`generateLexemRegexpr.py`**
- Генерация регулярных выражений для каждой лексемы с учётом ограничений языка

### **`generateLexemDFA.py`**
- Построение DFA для лексем с учётом ограничений языка

### **`DFAFromTable.py`**
- Модуль для работы с DFA:
  - Построение DFA по таблице переходов.

### **`equivalent.py`**
- Проверка эквивалентности двух автоматов.
- Генерация рандомного слова методом случаных блужданий.
- Проверка включения слова в язык.

### **`makeGrammatic.py`**
- Построение грамматики двумя способами:
  - Конкатенация регулярных выражений.
  - Из конечных автоматов (DFA).
